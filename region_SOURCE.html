<!DOCTYPE html>
<html lang="uk">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Region</title>
    <!-- –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è —à—Ä–∏—Ñ—Ç—É Orbitron –∑ Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* –í—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è —Å–∫—Ä–æ–ª—É –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ */
        html,
        body {
            overflow: hidden;
            margin: 0;
            padding: 0;
            height: 100%;
            background-color: #1e1e1e;
            color: white;
            font-family: Arial, sans-serif;
        }

        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        h1 {
            font-size: 4rem;
            margin-bottom: 20px;
            color: #4CAF50;
            font-family: 'Orbitron', sans-serif;
            /* –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —à—Ä–∏—Ñ—Ç—É Orbitron */
            text-transform: uppercase;
            letter-spacing: 5px;
            text-shadow: 0 0 10px #4CAF50, 0 0 20px #4CAF50;
        }

        canvas {
            border: 2px solid #444;
            background-color: #333;
            display: none;
            /* –ü—Ä–∏—Ö–æ–≤–∞—Ç–∏ canvas –Ω–∞ –ø–æ—á–∞—Ç–∫—É */
        }

        #retryButton {
            margin-top: 20px;
            padding: 10px 20px;
            font-size: 16px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
            display: none;
        }

        #retryButton:hover {
            background-color: #45a049;
        }

        .info {
            margin-top: 20px;
            font-size: 18px;
            position: absolute;
            left: 20px;
            top: 20px;
            display: none;
            /* –ü—Ä–∏—Ö–æ–≤–∞—Ç–∏ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –Ω–∞ –ø–æ—á–∞—Ç–∫—É */
        }

        .build-panel {
            margin-top: 20px;
            display: flex;
            gap: 10px;
            display: none;
            /* –ü—Ä–∏—Ö–æ–≤–∞—Ç–∏ –ø–∞–Ω–µ–ª—å –±—É–¥—ñ–≤–Ω–∏—Ü—Ç–≤–∞ –Ω–∞ –ø–æ—á–∞—Ç–∫—É */
        }

        .build-panel button {
            padding: 10px 20px;
            font-size: 16px;
            background-color: #555;
            color: white;
            border: none;
            cursor: pointer;
        }

        .build-panel button:hover {
            background-color: #777;
        }

        /* –°—Ç–∏–ª—ñ –¥–ª—è —Å—Ç–∞—Ä—Ç–æ–≤–æ–≥–æ –º–µ–Ω—é */
        .start-menu {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }

        .start-menu button {
            padding: 15px 30px;
            font-size: 18px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
            border-radius: 5px;
        }

        .start-menu button:hover {
            background-color: #45a049;
        }

        /* –°—Ç–∏–ª—ñ –¥–ª—è –º—ñ–Ω—ñ-–º–µ–Ω—é */
        .upgrade-menu {
            display: none;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: #444;
            padding: 20px;
            border: 2px solid #777;
            border-radius: 10px;
            text-align: center;
        }

        .upgrade-menu p {
            margin: 0 0 10px 0;
        }

        .upgrade-menu button {
            padding: 10px 20px;
            font-size: 16px;
            margin: 5px;
            cursor: pointer;
            border: none;
            border-radius: 5px;
        }

        #upgradeButton {
            background-color: #4CAF50;
            color: white;
        }

        #upgradeButton:hover {
            background-color: #45a049;
        }

        #closeUpgradeMenu {
            background-color: "#777";
            color: white;
        }

        #closeUpgradeMenu:hover {
            background-color: #666;
        }
    </style>
</head>

<body>
    <!-- –°—Ç–∞—Ä—Ç–æ–≤–µ –º–µ–Ω—é -->
    <div class="start-menu" id="startMenu">
        <h1>Region</h1>
        <button id="startButton">–ì—Ä–∞</button>
        <button id="exitButton">–í–∏—Ö—ñ–¥</button>
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≥—Ä–∏ -->
    <canvas id="gameCanvas" width="1600" height="900"></canvas>
    <button id="retryButton">–°–ø—Ä–æ–±—É–≤–∞—Ç–∏ –∑–Ω–æ–≤—É</button>
    <div class="info">
        <p>–ó–æ–ª–æ—Ç–æ: <span id="gold">500</span> üí∞</p>
        <p>–ó–¥–æ—Ä–æ–≤'—è —Ä–∞—Ç—É—à—ñ: <span id="townHallHealth">100</span> ‚ù§Ô∏è</p>
        <p>–•–≤–∏–ª—è: <span id="wave">1</span></p>
    </div>
    <div class="build-panel">
        <button id="buildWall">üß± –°—Ç—ñ–Ω–∞ (20 –∑–æ–ª–æ—Ç–∞)</button>
        <button id="buildArcherTower">üèπ –õ—É—á–Ω–∞ –±–∞—à–Ω—è (100 –∑–æ–ª–æ—Ç–∞)</button>
        <button id="buildMine">‚õèÔ∏è –®–∞—Ö—Ç–∞ (100 –∑–æ–ª–æ—Ç–∞)</button>
        <button id="buildWorker">üë∑ –†–æ–±–æ—á–∏–π (5000 –∑–æ–ª–æ—Ç–∞)</button>
        <button id="buildFireTower" style="display: none;">üî• –í–µ–∂–∞ (300 –∑–æ–ª–æ—Ç–∞)</button>
        <button id="buildIceTower" style="display: none;">‚ùÑÔ∏è –õ—å–æ–¥—è–Ω–∞ –≤–µ–∂–∞ (350 –∑–æ–ª–æ—Ç–∞)</button>
        <button id="buildMagicTower" style="display: none;">üîÆ –ú–∞–≥—ñ—á–Ω–∞ –≤–µ–∂–∞ (400 –∑–æ–ª–æ—Ç–∞)</button>
        <button id="buildSniperTower" style="display: none;">üéØ –°–Ω–∞–π–ø–µ—Ä—Å—å–∫–∞ –≤–µ–∂–∞ (450 –∑–æ–ª–æ—Ç–∞)</button>
        <button id="deleteBuilding">‚ùå –í–∏–¥–∞–ª–∏—Ç–∏ —Å–ø–æ—Ä—É–¥—É</button>
    </div>

    <!-- –ú—ñ–Ω—ñ-–º–µ–Ω—é –¥–ª—è –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è –≤–µ–∂—ñ -->
    <div id="upgradeMenu" class="upgrade-menu">
        <p>–ü–æ–∫—Ä–∞—â–∏—Ç–∏ –≤–µ–∂—É –∑–∞ <span id="upgradeCost">200</span> –∑–æ–ª–æ—Ç–∞?</p>
        <button id="upgradeButton">–ü–æ–∫—Ä–∞—â–∏—Ç–∏</button>
        <button id="closeUpgradeMenu">–ó–∞–∫—Ä–∏—Ç–∏</button>
    </div>
    <script>
        // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è –∑–æ–ª–æ—Ç–∞
        function addGold(amount) {
            game.gold += amount;
            goldDisplay.textContent = game.gold;
            console.log(`–î–æ–¥–∞–Ω–æ ${amount} –∑–æ–ª–æ—Ç–∞. –ó–∞–≥–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å: ${game.gold}`);
        }

        // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è –≤—Å—ñ—Ö –≤–µ–∂
        function unlockAllTowers() {
            game.unlockedTowers = ["wall", "archerTower", "mine", "fireTower", "iceTower", "magicTower", "sniperTower"];
            console.log("–í—Å—ñ –≤–µ–∂—ñ –≤—ñ–¥–∫—Ä–∏—Ç—ñ!");
        }

        // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –±—É–¥—ñ–≤–Ω–∏—Ü—Ç–≤–∞ –≤—Å—ñ—Ö —Å–ø–æ—Ä—É–¥
        function finishAllConstruction() {
            game.buildings.forEach(building => {
                building.isUnderConstruction = false;
                building.constructionProgress = building.constructionTime;
            });
            console.log("–ë—É–¥—ñ–≤–Ω–∏—Ü—Ç–≤–æ –≤—Å—ñ—Ö —Å–ø–æ—Ä—É–¥ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!");
        }

        // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –∑–∞–ø—É—Å–∫—É —Ö–≤–∏–ª—ñ
        function startWaveManually() {
            startWave();
            console.log("–•–≤–∏–ª—è –∑–∞–ø—É—â–µ–Ω–∞ –≤—Ä—É—á–Ω—É!");
        }

        // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è —Å–∫–∏–¥–∞–Ω–Ω—è –≥—Ä–∏
        function resetGameManually() {
            resetGame();
            console.log("–ì—Ä–∞ —Å–∫–∏–Ω—É—Ç–∞!");
        }

        // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è –∑–∞—Ö–∏—Å–Ω–∏–∫—ñ–≤
        function addDefenders(count) {
            for (let i = 0; i < count; i++) {
                const x = Math.floor(Math.random() * canvas.width / game.cellSize) * game.cellSize;
                const y = Math.floor(Math.random() * canvas.height / game.cellSize) * game.cellSize;
                game.defenders.push(new Defender(x, y));
            }
            console.log(`–î–æ–¥–∞–Ω–æ ${count} –∑–∞—Ö–∏—Å–Ω–∏–∫—ñ–≤!`);
        }

        // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Å–ø–∏—Å–∫—É –¥–æ—Å—Ç—É–ø–Ω–∏—Ö –∫–æ–º–∞–Ω–¥
        function showCommands() {
            console.log("–î–æ—Å—Ç—É–ø–Ω—ñ –∫–æ–º–∞–Ω–¥–∏:");
            console.log("addGold(amount) - –î–æ–¥–∞—Ç–∏ –∑–æ–ª–æ—Ç–æ");
            console.log("unlockAllTowers() - –í—ñ–¥–∫—Ä–∏—Ç–∏ –≤—Å—ñ –≤–µ–∂—ñ");
            console.log("finishAllConstruction() - –ó–∞–≤–µ—Ä—à–∏—Ç–∏ –±—É–¥—ñ–≤–Ω–∏—Ü—Ç–≤–æ –≤—Å—ñ—Ö —Å–ø–æ—Ä—É–¥");
            console.log("startWaveManually() - –ó–∞–ø—É—Å—Ç–∏—Ç–∏ —Ö–≤–∏–ª—é –≤—Ä—É—á–Ω—É");
            console.log("resetGameManually() - –°–∫–∏–Ω—É—Ç–∏ –≥—Ä—É");
            console.log("addDefenders(count) - –î–æ–¥–∞—Ç–∏ –∑–∞—Ö–∏—Å–Ω–∏–∫—ñ–≤");
        }

        // –ü–æ–∫–∞–∑—É—î–º–æ —Å–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥ –ø—Ä–∏ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—ñ —Å–∫—Ä–∏–ø—Ç–∞
        showCommands();
    </script>

    <script>
        const canvas = document.getElementById("gameCanvas");
        const ctx = canvas.getContext("2d");
        const retryButton = document.getElementById("retryButton");
        const goldDisplay = document.getElementById("gold");
        const townHallHealthDisplay = document.getElementById("townHallHealth");
        const waveDisplay = document.getElementById("wave");
        const buildWallButton = document.getElementById("buildWall");
        const buildFireTowerButton = document.getElementById("buildFireTower");
        const buildIceTowerButton = document.getElementById("buildIceTower");
        const buildMagicTowerButton = document.getElementById("buildMagicTower");
        const buildSniperTowerButton = document.getElementById("buildSniperTower");
        const buildArcherTowerButton = document.getElementById("buildArcherTower");
        const buildMineButton = document.getElementById("buildMine");
        const buildWorkerButton = document.getElementById("buildWorker");
        const deleteBuildingButton = document.getElementById("deleteBuilding");
        const upgradeMenu = document.getElementById("upgradeMenu");
        const upgradeButton = document.getElementById("upgradeButton");
        const closeUpgradeMenu = document.getElementById("closeUpgradeMenu");
        const upgradeCostDisplay = document.getElementById("upgradeCost");
        const startMenu = document.getElementById("startMenu");
        const startButton = document.getElementById("startButton");
        const exitButton = document.getElementById("exitButton");

        canvas.width = 1600;
        canvas.height = 900;

        // –ì–æ–ª–æ–≤–Ω–∏–π –æ–±'—î–∫—Ç –≥—Ä–∏
        const game = {
            buildings: [],
            enemies: [],
            defenders: [],
            gold: 500,
            cellSize: 50,
            townHall: null,
            isGameOver: false,
            wave: 1,
            isWaveActive: false,
            waveTimer: 0,
            waveInterval: null,
            waveStartTimer: null,
            timeToNextWave: 60,
            mineInterval: null,
            mineBuildTime: 15000,
            mineBuildTimer: null,
            selectedBuilding: null,
            selectedDefenders: [],
            buildingsUnderConstruction: 0,
            maxBuildingsUnderConstruction: 2, // –ü–æ—á–∞—Ç–∫–æ–≤–∏–π –ª—ñ–º—ñ—Ç –±—É–¥—ñ–≤–µ–ª—å
            barracksLevel: 1,
            barracksUpgradeCost: 650,
            unlockedTowers: ["wall", "archerTower", "mine"], // –ü–æ—á–∞—Ç–∫–æ–≤—ñ –¥–æ—Å—Ç—É–ø–Ω—ñ –≤–µ–∂—ñ
            nextTowerUnlockWave: 2, // –ù–∞—Å—Ç—É–ø–Ω–∞ –≤–µ–∂–∞ –≤—ñ–¥–∫—Ä–∏—î—Ç—å—Å—è –Ω–∞ 2 —Ö–≤–∏–ª—ñ
            towerUnlockInterval: 3, // –Ü–Ω—Ç–µ—Ä–≤–∞–ª –º—ñ–∂ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è–º –Ω–æ–≤–∏—Ö –≤–µ–∂
        };

        // –ö–ª–∞—Å –±—É–¥—ñ–≤–ª—ñ
        class Building {
            constructor(x, y, type) {
                this.x = x;
                this.y = y;
                this.type = type;
                this.health = 100;
                this.emoji = this.getEmoji();
                this.cooldown = 0;
                this.projectiles = [];
                this.isUnderConstruction = true;
                this.constructionProgress = 0;
                this.constructionTime = this.getConstructionTime();
                this.level = 1; // –†—ñ–≤–µ–Ω—å –≤–µ–∂—ñ
            }

            getEmoji() {
                switch (this.type) {
                    case "wall": return "üß±";
                    case "townHall": return "üèõÔ∏è";
                    case "fireTower": return "üî•";
                    case "iceTower": return "‚ùÑÔ∏è";
                    case "magicTower": return "üîÆ";
                    case "sniperTower": return "üéØ";
                    case "archerTower": return "üèπ";
                    case "mine": return "‚õèÔ∏è";
                    case "worker": return "üë∑";
                    case "barracks": return "üèØ";
                    default: return "‚ùì";
                }
            }

            getConstructionTime() {
                switch (this.type) {
                    case "wall": return 25000;
                    case "fireTower": return 15000;
                    case "iceTower": return 20000;
                    case "magicTower": return 25000;
                    case "sniperTower": return 30000;
                    case "archerTower": return 10000; // –®–≤–∏–¥—à–µ –±—É–¥—ñ–≤–Ω–∏—Ü—Ç–≤–æ –ª—É—á–Ω–æ—ó –±–∞—à–Ω—ñ
                    case "mine": return 15000;
                    case "worker": return 20000; // –ß–∞—Å –±—É–¥—ñ–≤–Ω–∏—Ü—Ç–≤–∞ —Ä–æ–±–æ—á–æ–≥–æ
                    case "barracks": return 20000;
                    default: return 0;
                }
            }

            draw() {
                if (this.health <= 0) return; // –Ø–∫—â–æ —Å–ø–æ—Ä—É–¥–∞ –∑–Ω–∏—â–µ–Ω–∞, –Ω–µ –º–∞–ª—é—î–º–æ —ó—ó

                ctx.font = `${game.cellSize}px Arial`;
                ctx.textAlign = "center";
                ctx.textBaseline = "middle";
                ctx.fillText(this.emoji, this.x + game.cellSize / 2, this.y + game.cellSize / 2);

                // –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∑–¥–æ—Ä–æ–≤'—è
                ctx.fillStyle = "red";
                ctx.fillRect(this.x, this.y + game.cellSize - 10, game.cellSize * (this.health / 100), 5);

                // –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –ø—Ä–æ–≥—Ä–µ—Å—É –±—É–¥—ñ–≤–Ω–∏—Ü—Ç–≤–∞
                if (this.isUnderConstruction) {
                    ctx.fillStyle = "rgba(0, 0, 0, 0.5)";
                    ctx.fillRect(this.x, this.y, game.cellSize, game.cellSize);
                    ctx.fillStyle = "white";
                    const progressPercent = Math.floor((this.constructionProgress / this.constructionTime) * 100);
                    ctx.fillText(
                        `${progressPercent}%`,
                        this.x + game.cellSize / 2,
                        this.y + game.cellSize / 2
                    );
                }

                // –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Å–Ω–∞—Ä—è–¥—ñ–≤
                this.projectiles.forEach(projectile => {
                    ctx.beginPath();
                    ctx.moveTo(projectile.x, projectile.y);
                    ctx.lineTo(projectile.target.x, projectile.target.y);
                    ctx.strokeStyle = "brown";
                    ctx.lineWidth = 2;
                    ctx.stroke();
                });
            }

            update() {
                if (this.health <= 0) {
                    // –í–∏–¥–∞–ª—è—î–º–æ —Å–ø–æ—Ä—É–¥—É –∑ –º–∞—Å–∏–≤—É –±—É–¥—ñ–≤–µ–ª—å
                    game.buildings = game.buildings.filter(b => b !== this);
                    return;
                }

                if (this.isUnderConstruction) {
                    this.constructionProgress += 16;
                    if (this.constructionProgress >= this.constructionTime) {
                        this.isUnderConstruction = false;
                        game.buildingsUnderConstruction--;
                        if (this.type === "barracks") {
                            for (let i = 0; i < 3; i++) {
                                const offsetX = (i % 3 - 1) * game.cellSize;
                                const offsetY = Math.floor(i / 3) * game.cellSize;
                                game.defenders.push(new Defender(this.x + offsetX, this.y + offsetY));
                            }
                        }
                        if (this.type === "worker") {
                            game.maxBuildingsUnderConstruction = 2; // –°–∫–∏–¥–∞–Ω–Ω—è –ª—ñ–º—ñ—Ç—É –±—É–¥—ñ–≤–µ–ª—å –¥–æ 2
                        }
                    }
                    return;
                }

                if (this.type === "fireTower" || this.type === "upgradedFireTower") {
                    this.cooldown--;
                    if (this.cooldown <= 0) {
                        for (let enemy of game.enemies) {
                            if (Math.hypot(this.x - enemy.x, this.y - enemy.y) < 150) {
                                this.projectiles.push({
                                    x: this.x + game.cellSize / 2,
                                    y: this.y + game.cellSize / 2,
                                    target: enemy,
                                    speed: 5
                                });
                                this.cooldown = this.type === "fireTower" ? 60 : 30;
                                break;
                            }
                        }
                    }
                }

                if (this.type === "archerTower") {
                    this.cooldown--;
                    if (this.cooldown <= 0) {
                        for (let enemy of game.enemies) {
                            if (Math.hypot(this.x - enemy.x, this.y - enemy.y) < 200) {
                                this.projectiles.push({
                                    x: this.x + game.cellSize / 2,
                                    y: this.y + game.cellSize / 2,
                                    target: enemy,
                                    speed: 4
                                });
                                this.cooldown = 60; // –ö—É–ª–¥–∞—É–Ω –¥–ª—è –ª—É—á–Ω–æ—ó –±–∞—à–Ω—ñ
                                break;
                            }
                        }
                    }
                }

                this.projectiles.forEach((projectile, index) => {
                    let angle = Math.atan2(projectile.target.y - projectile.y, projectile.target.x - projectile.x);
                    projectile.x += Math.cos(angle) * projectile.speed;
                    projectile.y += Math.sin(angle) * projectile.speed;

                    if (Math.hypot(projectile.x - projectile.target.x, projectile.y - projectile.target.y) < 10) {
                        projectile.target.health -= this.type === "archerTower" ? 20 : 40; // –£—Ä–æ–Ω –≤—ñ–¥ —Å—Ç—Ä—ñ–ª–∏
                        this.projectiles.splice(index, 1);
                    }
                });
            }
        }
        //–ö–ª–∞—Å –≤–æ—Ä–æ–≥—ñ–≤
        class Enemy {
            constructor(x, y, type) {
                this.x = x;
                this.y = y;
                this.type = type;
                this.speed = this.getSpeed();
                this.health = this.getHealth();
                this.emoji = this.getEmoji();
                this.target = null;
                this.attackCooldown = 0;
                this.projectiles = [];
                this.attackRange = this.getAttackRange(); // –î–æ–¥–∞—î–º–æ –¥—ñ–∞–ø–∞–∑–æ–Ω –∞—Ç–∞–∫–∏
            }

            getSpeed() {
                switch (this.type) {
                    case "skeleton": return 1.5; // –ó–±—ñ–ª—å—à–∏–≤ —à–≤–∏–¥–∫—ñ—Å—Ç—å —Å–∫–µ–ª–µ—Ç—ñ–≤
                    case "demon": return 1;
                    case "zombie": return 0.8;
                    default: return 1;
                }
            }

            getHealth() {
                switch (this.type) {
                    case "skeleton": return 50;
                    case "demon": return 200;
                    case "zombie": return 100;
                    default: return 100;
                }
            }

            getAttackRange() {
                switch (this.type) {
                    case "skeleton": return 200; // –î—ñ–∞–ø–∞–∑–æ–Ω –∞—Ç–∞–∫–∏ –¥–ª—è —Å–∫–µ–ª–µ—Ç–∞
                    default: return game.cellSize; // –î–ª—è —ñ–Ω—à–∏—Ö - –±–ª–∏–∂–Ω—ñ–π –±—ñ–π
                }
            }

            getEmoji() {
                switch (this.type) {
                    case "skeleton": return "üíÄ";
                    case "demon": return "üëø";
                    case "zombie": return "üßü";
                    default: return "‚ùì";
                }
            }

            draw() {
                ctx.font = `${game.cellSize}px Arial`;
                ctx.textAlign = "center";
                ctx.textBaseline = "middle";
                ctx.fillText(this.emoji, this.x + game.cellSize / 2, this.y + game.cellSize / 2);

                // –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Å–Ω–∞—Ä—è–¥—ñ–≤ —Å–∫–µ–ª–µ—Ç–∞
                this.projectiles.forEach(projectile => {
                    ctx.beginPath();
                    ctx.arc(projectile.x, projectile.y, 5, 0, Math.PI * 2);
                    ctx.fillStyle = "white";
                    ctx.fill();
                });
            }

            update() {
                if (this.attackCooldown > 0) {
                    this.attackCooldown--;
                }

                if (!this.target || this.target.health <= 0) {
                    const potentialTargets = [...game.buildings, ...game.defenders];
                    this.target = potentialTargets.find(target => target.health > 0);
                }

                if (this.target) {
                    const distanceToTarget = Math.hypot(this.x - this.target.x, this.y - this.target.y);

                    // –î–ª—è —Å–∫–µ–ª–µ—Ç—ñ–≤ - —Ä—É—Ö–∞—Ç–∏—Å—è –¥–æ –¥—ñ–∞–ø–∞–∑–æ–Ω—É –∞—Ç–∞–∫–∏
                    if (this.type === "skeleton") {
                        if (distanceToTarget > this.attackRange) {
                            // –†—É—Ö–∞—î–º–æ—Å—è –¥–æ —Ü—ñ–ª—ñ, –¥–æ–∫–∏ –Ω–µ –¥–æ—Å—è–≥–Ω–µ–º–æ –¥—ñ–∞–ø–∞–∑–æ–Ω—É –∞—Ç–∞–∫–∏
                            let angle = Math.atan2(this.target.y - this.y, this.target.x - this.x);
                            this.x += Math.cos(angle) * this.speed;
                            this.y += Math.sin(angle) * this.speed;
                        } else if (this.attackCooldown <= 0) {
                            // –ê—Ç–∞–∫—É—î–º–æ, —è–∫—â–æ –≤ –¥—ñ–∞–ø–∞–∑–æ–Ω—ñ
                            this.projectiles.push({
                                x: this.x + game.cellSize / 2,
                                y: this.y + game.cellSize / 2,
                                target: this.target,
                                speed: 3
                            });
                            this.attackCooldown = 120;
                        }
                    }
                    // –î–ª—è —ñ–Ω—à–∏—Ö –≤–æ—Ä–æ–≥—ñ–≤ - –∑–≤–∏—á–∞–π–Ω–∞ –ø–æ–≤–µ–¥—ñ–Ω–∫–∞
                    else {
                        let angle = Math.atan2(this.target.y - this.y, this.target.x - this.x);
                        this.x += Math.cos(angle) * this.speed;
                        this.y += Math.sin(angle) * this.speed;

                        if (distanceToTarget < game.cellSize) {
                            if (this.attackCooldown <= 0) {
                                this.target.health -= this.type === "demon" ? 15 : 10;
                                this.attackCooldown = 180;
                            }
                            if (this.target.health <= 0) {
                                if (this.target.type === "townHall") {
                                    game.isGameOver = true;
                                    retryButton.style.display = "block";
                                }
                                this.target = null;
                            }
                        }
                    }
                }

                // –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Å–Ω–∞—Ä—è–¥—ñ–≤ —Å–∫–µ–ª–µ—Ç–∞
                this.projectiles.forEach((projectile, index) => {
                    let angle = Math.atan2(projectile.target.y - projectile.y, projectile.target.x - projectile.x);
                    projectile.x += Math.cos(angle) * projectile.speed;
                    projectile.y += Math.sin(angle) * projectile.speed;

                    if (Math.hypot(projectile.x - projectile.target.x, projectile.y - projectile.target.y) < 10) {
                        projectile.target.health -= 10;
                        this.projectiles.splice(index, 1);
                    }
                });
            }
        }
        // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–∞–π–º–µ—Ä–∞
function updateWaveTimer() {
    const timerElement = document.getElementById('waveTimer');
    if (game.isWaveActive) {
        timerElement.textContent = "–•–≤–∏–ª—è —Ç—Ä–∏–≤–∞—î!";
    } else {
        timerElement.textContent = `–î–æ –Ω–∞—Å—Ç—É–ø–Ω–æ—ó —Ö–≤–∏–ª—ñ: ${game.timeToNextWave} —Å–µ–∫`;
    }
}

// –û–Ω–æ–≤–ª—é—î–º–æ —Ñ—É–Ω–∫—Ü—ñ—é resetGame()
function resetGame() {
    // ... —ñ–Ω—à–∏–π –∫–æ–¥ ...
    game.timeToNextWave = 60; // 60 —Å–µ–∫—É–Ω–¥ –¥–æ –ø–µ—Ä—à–æ—ó —Ö–≤–∏–ª—ñ
    updateWaveTimer();
    
    // –ó–∞–ø—É—Å–∫–∞—î–º–æ —Ç–∞–π–º–µ—Ä
    clearInterval(game.waveStartTimer);
    game.waveStartTimer = setInterval(() => {
        game.timeToNextWave--;
        updateWaveTimer();
        
        if (game.timeToNextWave <= 0) {
            clearInterval(game.waveStartTimer);
            startWave();
        }
    }, 1000);
    
    // –í–∏–¥–∞–ª—è—î–º–æ —Å—Ç–∞—Ä–∏–π setTimeout, —Ç–∞–∫ —è–∫ —Ç–µ–ø–µ—Ä –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ setInterval
}

        // –ö–ª–∞—Å –∑–∞—Ö–∏—Å–Ω–∏–∫–∞
        class Defender {
            constructor(x, y) {
                this.x = x;
                this.y = y;
                this.health = 90;
                this.emoji = "‚öîÔ∏è";
                this.speed = 2;
                this.target = null;
                this.isSelected = false;
                this.attackCooldown = 0;
            }

            draw() {
                ctx.font = `${game.cellSize}px Arial`;
                ctx.textAlign = "center";
                ctx.textBaseline = "middle";
                ctx.fillText(this.emoji, this.x + game.cellSize / 2, this.y + game.cellSize / 2);

                if (this.isSelected) {
                    ctx.strokeStyle = "yellow";
                    ctx.lineWidth = 2;
                    ctx.strokeRect(this.x, this.y, game.cellSize, game.cellSize);
                }
            }

            update() {
                if (this.attackCooldown > 0) {
                    this.attackCooldown--;
                }

                let closestEnemy = null;
                let closestDistance = Infinity;

                for (let enemy of game.enemies) {
                    let distance = Math.hypot(this.x - enemy.x, this.y - enemy.y);
                    if (distance < closestDistance) {
                        closestDistance = distance;
                        closestEnemy = enemy;
                    }
                }

                if (closestEnemy) {
                    this.target = closestEnemy;
                    let angle = Math.atan2(this.target.y - this.y, this.target.x - this.x);
                    this.x += Math.cos(angle) * this.speed;
                    this.y += Math.sin(angle) * this.speed;

                    if (Math.hypot(this.x - this.target.x, this.y - this.target.y) < game.cellSize) {
                        if (this.attackCooldown <= 0) {
                            this.target.health -= 20;
                            this.attackCooldown = 150;
                        }
                        if (this.target.health <= 0) {
                            game.enemies = game.enemies.filter(e => e !== this.target);
                            this.target = null;
                        }
                    }
                }
            }
        }

        // –§—É–Ω–∫—Ü—ñ—è –º–∞–ª—é–≤–∞–Ω–Ω—è —Å—ñ—Ç–∫–∏
        function drawGrid() {
            ctx.strokeStyle = "rgba(255,255,255,0.3)";
            for (let x = 0; x <= canvas.width; x += game.cellSize) {
                ctx.beginPath();
                ctx.moveTo(x, 0);
                ctx.lineTo(x, canvas.height);
                ctx.stroke();
            }
            for (let y = 0; y <= canvas.height; y += game.cellSize) {
                ctx.beginPath();
                ctx.moveTo(0, y);
                ctx.lineTo(canvas.width, y);
                ctx.stroke();
            }
        }

        // –ü–µ—Ä–µ–º—ñ—â–µ–Ω–Ω—è —Ç–∞ –±—É–¥—ñ–≤–Ω–∏—Ü—Ç–≤–æ
        canvas.addEventListener("click", (event) => {
            if (game.isGameOver) return;

            let rect = canvas.getBoundingClientRect();
            let mouseX = event.clientX - rect.left;
            let mouseY = event.clientY - rect.top;

            // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞, —á–∏ –∫–ª—ñ–∫–Ω—É–ª–∏ –Ω–∞ –∑–∞—Ö–∏—Å–Ω–∏–∫–∞
            for (let defender of game.defenders) {
                if (
                    mouseX >= defender.x &&
                    mouseX <= defender.x + game.cellSize &&
                    mouseY >= defender.y &&
                    mouseY <= defender.y + game.cellSize
                ) {
                    // –í–∏–¥—ñ–ª–µ–Ω–Ω—è/–∑–Ω—è—Ç—Ç—è –≤–∏–¥—ñ–ª–µ–Ω–Ω—è
                    defender.isSelected = !defender.isSelected;
                    if (defender.isSelected) {
                        game.selectedDefenders.push(defender);
                    } else {
                        game.selectedDefenders = game.selectedDefenders.filter(d => d !== defender);
                    }
                    return;
                }
            }

            // –ü–µ—Ä–µ–º—ñ—â–µ–Ω–Ω—è –≤–∏–¥—ñ–ª–µ–Ω–∏—Ö –∑–∞—Ö–∏—Å–Ω–∏–∫—ñ–≤
            if (game.selectedDefenders.length > 0) {
                let cellX = Math.floor(mouseX / game.cellSize) * game.cellSize;
                let cellY = Math.floor(mouseY / game.cellSize) * game.cellSize;

                // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞, —á–∏ –∫–ª—ñ—Ç–∏–Ω–∫–∞ –≤—ñ–ª—å–Ω–∞
                let isOccupied = game.buildings.some(b => b.x === cellX && b.y === cellY) ||
                    game.defenders.some(d => d.x === cellX && d.y === cellY);

                if (!isOccupied) {
                    game.selectedDefenders.forEach(defender => {
                        defender.x = cellX;
                        defender.y = cellY;
                    });
                }
                return;
            }

            // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞, —á–∏ –∫–ª—ñ–∫–Ω—É–ª–∏ –Ω–∞ –≤–µ–∂—É
            for (let building of game.buildings) {
                if (
                    building.type === "fireTower" &&
                    mouseX >= building.x &&
                    mouseX <= building.x + game.cellSize &&
                    mouseY >= building.y &&
                    mouseY <= building.y + game.cellSize
                ) {
                    game.selectedBuilding = building;
                    upgradeMenu.style.display = "block";
                    return;
                }
            }

            let cellX = Math.floor(mouseX / game.cellSize) * game.cellSize;
            let cellY = Math.floor(mouseY / game.cellSize) * game.cellSize;

            let isOccupied = game.buildings.some(b => b.x === cellX && b.y === cellY);
            if (!isOccupied) {
                if (game.selectedBuilding && game.gold >= game.selectedBuilding.cost && game.buildingsUnderConstruction < game.maxBuildingsUnderConstruction) {
                    let newBuilding = new Building(cellX, cellY, game.selectedBuilding.type);
                    game.buildings.push(newBuilding);
                    game.gold -= game.selectedBuilding.cost;
                    goldDisplay.textContent = game.gold;
                    game.buildingsUnderConstruction++; // –ó–±—ñ–ª—å—à—É—î–º–æ –ª—ñ—á–∏–ª—å–Ω–∏–∫ –±—É–¥—ñ–≤–µ–ª—å, —â–æ –±—É–¥—É—é—Ç—å—Å—è
                } else {
                    alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–Ω—å–æ —Ä–µ—Å—É—Ä—Å—ñ–≤, –Ω–µ –≤–∏–±—Ä–∞–Ω–æ –±—É–¥—ñ–≤–ª—é –∞–±–æ –¥–æ—Å—è–≥–Ω—É—Ç–æ –ª—ñ–º—ñ—Ç –±—É–¥—ñ–≤–Ω–∏—Ü—Ç–≤–∞!");
                }
            }
        });

        // –ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è –≤–µ–∂—ñ
        upgradeButton.addEventListener("click", () => {
            if (game.gold >= 200 && game.selectedBuilding) {
                game.selectedBuilding.type = "upgradedFireTower";
                game.selectedBuilding.emoji = "üåã";
                game.selectedBuilding.isUnderConstruction = true;
                game.selectedBuilding.constructionProgress = 0;
                game.selectedBuilding.constructionTime = 40000;
                game.gold -= 200;
                goldDisplay.textContent = game.gold;
                upgradeMenu.style.display = "none";
            } else {
                alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–Ω—å–æ –∑–æ–ª–æ—Ç–∞!");
            }
        });

        // –ó–∞–∫—Ä–∏—Ç—Ç—è –º—ñ–Ω—ñ-–º–µ–Ω—é
        closeUpgradeMenu.addEventListener("click", () => {
            upgradeMenu.style.display = "none";
        });

        // –í–∏–¥–∞–ª–µ–Ω–Ω—è —Å–ø–æ—Ä—É–¥–∏
        deleteBuildingButton.addEventListener("click", () => {
            if (game.selectedBuilding) {
                game.buildings = game.buildings.filter(b => b !== game.selectedBuilding);
                game.selectedBuilding = null;
            }
        });

        // –°–ø–∞–≤–Ω –≤–æ—Ä–æ–≥–∞
        function spawnEnemy(type) {
            let side = Math.floor(Math.random() * 4);
            let x, y;
            const margin = 100; // –í—ñ–¥—Å—Ç—É–ø –≤—ñ–¥ –∫—Ä–∞—é –ø–æ–ª—è

            switch (side) {
                case 0: // –≤–µ—Ä—Ö
                    x = Math.random() * (canvas.width - 2 * margin) + margin;
                    y = -game.cellSize;
                    break;
                case 1: // –ø—Ä–∞–≤–æ
                    x = canvas.width + game.cellSize;
                    y = Math.random() * (canvas.height - 2 * margin) + margin;
                    break;
                case 2: // –Ω–∏–∑
                    x = Math.random() * (canvas.width - 2 * margin) + margin;
                    y = canvas.height + game.cellSize;
                    break;
                case 3: // –ª—ñ–≤–æ
                    x = -game.cellSize;
                    y = Math.random() * (canvas.height - 2 * margin) + margin;
                    break;
            }

            game.enemies.push(new Enemy(x, y, type));
        }

        // –ü–æ—á–∞—Ç–æ–∫ —Ö–≤–∏–ª—ñ
        function startWave() {
            game.isWaveActive = true;
            game.timeToNextWave = 120;
            waveDisplay.textContent = game.wave;

            const baseEnemies = 5 + game.wave; // –ë—ñ–ª—å—à–µ –≤–æ—Ä–æ–≥—ñ–≤ –∑ –∫–æ–∂–Ω–∏–º —Ä—ñ–≤–Ω–µ–º
            const waveMultiplier = game.wave * 2;
            const totalEnemies = baseEnemies + waveMultiplier;

            const spawnInterval = 2000 - (game.wave * 100); // –®–≤–∏–¥—à–µ —Å–ø–∞–≤–Ω –≤–æ—Ä–æ–≥—ñ–≤ –∑ –∫–æ–∂–Ω–∏–º —Ä—ñ–≤–Ω–µ–º
            const minSpawnInterval = 500; // –ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π —ñ–Ω—Ç–µ—Ä–≤–∞–ª

            let spawnedEnemies = 0;

            const waveSpawner = setInterval(() => {
                if (spawnedEnemies >= totalEnemies) {
                    clearInterval(waveSpawner);
                    return;
                }

                // –í–∏–ø–∞–¥–∫–æ–≤–æ –æ–±–∏—Ä–∞—î–º–æ —Ç–∏–ø –≤–æ—Ä–æ–≥–∞
                const enemyTypes = ["zombie", "demon", "skeleton"];
                const enemyType = enemyTypes[Math.floor(Math.random() * enemyTypes.length)];
                spawnEnemy(enemyType);
                spawnedEnemies++;
            }, Math.max(minSpawnInterval, spawnInterval));

            // –£ —Ñ—É–Ω–∫—Ü—ñ—ó startWave(), –≤ –±–ª–æ–∫—É setTimeout –¥–µ –æ–±—Ä–æ–±–ª—è—î—Ç—å—Å—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è —Ö–≤–∏–ª—ñ
            setTimeout(() => {
                game.isWaveActive = false;
                game.wave++;
                game.gold += 1000;
                goldDisplay.textContent = game.gold;

                // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞, —á–∏ –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤—ñ–¥–∫—Ä–∏—Ç–∏ –Ω–æ–≤—É –≤–µ–∂—É
                if (game.wave === game.nextTowerUnlockWave) {
                    const newTower = getNextTower();
                    if (newTower) {
                        game.unlockedTowers.push(newTower);
                        game.nextTowerUnlockWave += game.towerUnlockInterval;
                        alert(`–ù–æ–≤–∞ –≤–µ–∂–∞ "${newTower}" –≤—ñ–¥–∫—Ä–∏—Ç–∞!`);
                        updateBuildButtonsVisibility(); // –û–Ω–æ–≤–ª—é—î–º–æ –∫–Ω–æ–ø–∫–∏
                    }
                }

                // –ü–∞—É–∑–∞ –º—ñ–∂ —Ö–≤–∏–ª—è–º–∏
                setTimeout(() => {
                    startWave();
                }, 120000);
            }, totalEnemies * Math.max(minSpawnInterval, spawnInterval) + 5000);
        }

        // –û—Ç—Ä–∏–º–∞–Ω–Ω—è –Ω–∞—Å—Ç—É–ø–Ω–æ—ó –≤–µ–∂—ñ –¥–ª—è –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è
        function getNextTower() {
            const towers = ["fireTower", "iceTower", "magicTower", "sniperTower"];
            for (let tower of towers) {
                if (!game.unlockedTowers.includes(tower)) {
                    return tower;
                }
            }
            return null; // –Ø–∫—â–æ –≤—Å—ñ –≤–µ–∂—ñ –≤–∂–µ –≤—ñ–¥–∫—Ä–∏—Ç—ñ
        }

        // –®–∞—Ö—Ç–∞: –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è –∑–æ–ª–æ—Ç–∞
        function startMineProduction() {
            game.mineInterval = setInterval(() => {
                if (game.isGameOver) return;

                game.buildings.forEach(building => {
                    if (building.type === "mine" && !building.isUnderConstruction) {
                        game.gold += 1; // –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –∑–æ–ª–æ—Ç–∞ (1 –≤ —Å–µ–∫—É–Ω–¥—É)
                        goldDisplay.textContent = game.gold;
                    }
                });
            }, 1000); // –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –∫–æ–∂–Ω—É —Å–µ–∫—É–Ω–¥—É
        }

        // –°–∫–∏–¥–∞–Ω–Ω—è –≥—Ä–∏
        function resetGame() {
            game.buildings = [];
            game.enemies = [];
            game.defenders = [];
            game.gold = 500;
            game.townHall = new Building(canvas.width / 2 - game.cellSize, canvas.height / 2 - game.cellSize, "townHall");
            game.townHall.isUnderConstruction = false;
            game.isGameOver = false;
            game.wave = 1;
            game.isWaveActive = false;
            retryButton.style.display = "none";
            goldDisplay.textContent = game.gold;
            townHallHealthDisplay.textContent = game.townHall.health;
            waveDisplay.textContent = game.wave;
            game.buildingsUnderConstruction = 0;
            game.maxBuildingsUnderConstruction = 2;
            game.unlockedTowers = ["wall", "archerTower", "mine"];
            game.nextTowerUnlockWave = 2;

            updateBuildButtonsVisibility(); // –û–Ω–æ–≤–ª—é—î–º–æ –∫–Ω–æ–ø–∫–∏ –ø—Ä–∏ —Å–∫–∏–¥–∞–Ω–Ω—ñ –≥—Ä–∏

            if (game.mineInterval) clearInterval(game.mineInterval);
            startMineProduction();

            setTimeout(() => {
                startWave();
            }, 35000);
        }

        // –ü—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏
        window.addEventListener('load', function () {
            updateBuildButtonsVisibility();
        });
        // –û—Å–Ω–æ–≤–Ω–∏–π —Ü–∏–∫–ª –≥—Ä–∏
        function gameLoop() {
            if (game.isGameOver) return;

            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawGrid();

            if (game.townHall) {
                game.townHall.draw();
                townHallHealthDisplay.textContent = game.townHall.health;
            }

            game.buildings.forEach(building => {
                building.draw();
                building.update();
            });

            game.enemies.forEach(enemy => {
                enemy.draw();
                enemy.update();
            });

            game.defenders.forEach(defender => {
                defender.draw();
                defender.update();
            });

            game.enemies = game.enemies.filter(enemy => enemy.health > 0);

            requestAnimationFrame(gameLoop);
        }

        // –ü–æ—á–∞—Ç–∫–æ–≤–∞ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è
        startButton.addEventListener("click", () => {
            startMenu.style.display = "none"; // –ü—Ä–∏—Ö–æ–≤—É—î–º–æ —Å—Ç–∞—Ä—Ç–æ–≤–µ –º–µ–Ω—é
            canvas.style.display = "block"; // –ü–æ–∫–∞–∑—É—î–º–æ canvas
            document.querySelector(".info").style.display = "block"; // –ü–æ–∫–∞–∑—É—î–º–æ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é
            document.querySelector(".build-panel").style.display = "flex"; // –ü–æ–∫–∞–∑—É—î–º–æ –ø–∞–Ω–µ–ª—å –±—É–¥—ñ–≤–Ω–∏—Ü—Ç–≤–∞
            resetGame();
            gameLoop();
        });
        function updateBuildButtonsVisibility() {
            // –û–Ω–æ–≤–ª—é—î–º–æ –≤–∏–¥–∏–º—ñ—Å—Ç—å –∫–Ω–æ–ø–æ–∫ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ –¥–æ —Ä–æ–∑–±–ª–æ–∫–æ–≤–∞–Ω–∏—Ö –≤–µ–∂
            buildFireTowerButton.style.display = game.unlockedTowers.includes("fireTower") ? "block" : "none";
            buildIceTowerButton.style.display = game.unlockedTowers.includes("iceTower") ? "block" : "none";
            buildMagicTowerButton.style.display = game.unlockedTowers.includes("magicTower") ? "block" : "none";
            buildSniperTowerButton.style.display = game.unlockedTowers.includes("sniperTower") ? "block" : "none";
        }

        exitButton.addEventListener("click", () => {
            window.close(); // –ó–∞–∫—Ä–∏–≤–∞—î–º–æ –≤—ñ–∫–Ω–æ (–ø—Ä–∞—Ü—é—î –Ω–µ —É –≤—Å—ñ—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö)
        });

        // –û–±—Ä–æ–±–Ω–∏–∫–∏ –∫–Ω–æ–ø–æ–∫ –±—É–¥—ñ–≤–Ω–∏—Ü—Ç–≤–∞
        buildWallButton.addEventListener("click", () => {
            game.selectedBuilding = { type: "wall", cost: 20 };
        });

        buildFireTowerButton.addEventListener("click", () => {
            if (game.unlockedTowers.includes("fireTower")) {
                game.selectedBuilding = { type: "fireTower", cost: 300 };
            } else {
                alert("–¶—è –≤–µ–∂–∞ —â–µ –Ω–µ –≤—ñ–¥–∫—Ä–∏—Ç–∞!");
            }
        });

        buildIceTowerButton.addEventListener("click", () => {
            if (game.unlockedTowers.includes("iceTower")) {
                game.selectedBuilding = { type: "iceTower", cost: 350 };
            } else {
                alert("–¶—è –≤–µ–∂–∞ —â–µ –Ω–µ –≤—ñ–¥–∫—Ä–∏—Ç–∞!");
            }
        });

        buildMagicTowerButton.addEventListener("click", () => {
            if (game.unlockedTowers.includes("magicTower")) {
                game.selectedBuilding = { type: "magicTower", cost: 400 };
            } else {
                alert("–¶—è –≤–µ–∂–∞ —â–µ –Ω–µ –≤—ñ–¥–∫—Ä–∏—Ç–∞!");
            }
        });

        buildSniperTowerButton.addEventListener("click", () => {
            if (game.unlockedTowers.includes("sniperTower")) {
                game.selectedBuilding = { type: "sniperTower", cost: 450 };
            } else {
                alert("–¶—è –≤–µ–∂–∞ —â–µ –Ω–µ –≤—ñ–¥–∫—Ä–∏—Ç–∞!");
            }
        });

        buildArcherTowerButton.addEventListener("click", () => {
            game.selectedBuilding = { type: "archerTower", cost: 100 };
        });

        buildMineButton.addEventListener("click", () => {
            game.selectedBuilding = { type: "mine", cost: 100 };
        });

        buildWorkerButton.addEventListener("click", () => {
            if (game.gold >= 5000) {
                game.selectedBuilding = { type: "worker", cost: 5000 };
            } else {
                alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–Ω—å–æ –∑–æ–ª–æ—Ç–∞!");
            }
        });
    </script>
</body>

</html>